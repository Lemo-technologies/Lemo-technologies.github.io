<!DOCTYPE html>
<html lang="en" data-persona="boipelo">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intellect Dose System v15.1</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    
    <script>
      window.MathJax = {
        tex: { 
          inlineMath: [['$', '$'], ['\\(', '\\)']], 
          displayMath: [['$$', '$$'], ['\\[', '\\]']], 
          processEscapes: true 
        },
        svg: { fontCache: 'global' }
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        /* === CORE DESIGN SYSTEM === */
        :root {
            --transition-speed: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* === BOIPELO PERSONA (Dark/Cyber/Tech) === */
        [data-persona="boipelo"] {
            --bg-primary: #050505;
            --bg-secondary: #0f0f0f;
            --bg-tertiary: #141414;
            --text-primary: #00e5ff;
            --text-secondary: #64ffda;
            --text-body: #cfd8dc;
            --text-muted: #607d8b;
            --accent-primary: #2979ff;
            --accent-secondary: #ff1744;
            --accent-gold: #ffea00;
            --border-color: rgba(0, 229, 255, 0.15);
            --border-radius: 6px;
            --font-heading: 'Inter', sans-serif;
            --font-body: 'JetBrains Mono', monospace;
            --shadow-primary: 0 0 30px rgba(0, 229, 255, 0.05);
            --musa-only: none;
        }

        /* === MUSA PERSONA (Elegant/Gold/Royal) === */
        [data-persona="musa"] {
            --bg-primary: #1a1518;
            --bg-secondary: #221c20;
            --bg-tertiary: #2a2428;
            --text-primary: #ffcdd2;
            --text-secondary: #d4af37;
            --text-body: #ede7f6;
            --text-muted: #b39ddb;
            --accent-primary: #d4af37;
            --accent-secondary: #ef9a9a;
            --accent-gold: #d4af37;
            --border-color: rgba(212, 175, 55, 0.2);
            --border-radius: 16px;
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
            --shadow-primary: 0 20px 60px rgba(0, 0, 0, 0.4);
            --musa-only: block;
        }

        /* === RESET & BASE === */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: var(--bg-primary);
            color: var(--text-body);
            font-family: var(--font-body);
            min-height: 100vh;
            line-height: 1.6;
            transition: all var(--transition-speed);
        }

        /* === AUTH LAYER === */
        #auth-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-primary); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.6s ease;
        }

        .auth-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            padding: 3rem; width: 100%; max-width: 400px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-primary);
        }

        .auth-input {
            width: 100%; padding: 1rem; margin-bottom: 1rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-color);
            color: var(--text-primary); font-family: inherit;
        }

        .auth-btn {
            width: 100%; padding: 1rem;
            background: var(--accent-primary); color: #000;
            border: none; font-weight: bold; cursor: pointer;
            text-transform: uppercase; letter-spacing: 2px;
            transition: 0.3s;
        }
        
        .auth-btn:hover { filter: brightness(1.2); }

        /* === MAIN LAYOUT === */
        .layout {
            display: grid; grid-template-columns: 260px 1fr;
            max-width: 1400px; margin: 0 auto; min-height: 100vh;
            opacity: 0; transition: opacity 1s ease;
        }

        .sidebar {
            padding: 2rem; border-right: 1px solid var(--border-color);
            position: sticky; top: 0; height: 100vh; overflow-y: auto;
        }

        .main-content { padding: 3rem; overflow-y: auto; }

        /* === COMPONENTS === */
        .user-profile {
            margin-bottom: 3rem; text-align: center;
            padding-bottom: 2rem; border-bottom: 1px solid var(--border-color);
        }

        .avatar {
            width: 80px; height: 80px; margin: 0 auto 1rem;
            background: var(--accent-primary); color: var(--bg-primary);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-weight: bold;
        }

        .nav-link {
            display: block; padding: 1rem; margin-bottom: 0.5rem;
            color: var(--text-muted); text-decoration: none;
            border-radius: var(--border-radius); transition: 0.3s;
            border: 1px solid transparent;
        }

        .nav-link:hover, .nav-link.active {
            background: rgba(255,255,255,0.03);
            color: var(--text-primary);
            border-color: var(--border-color);
        }

        /* === DOSE CARDS === */
        .dose-header {
            margin-bottom: 3rem; padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
            display: flex; justify-content: space-between; align-items: flex-end;
        }

        .section-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 2rem; margin-bottom: 2rem;
            position: relative; overflow: hidden;
        }

        .section-card::before {
            content: ''; position: absolute; top: 0; left: 0;
            width: 4px; height: 100%; background: var(--accent-primary);
        }

        .section-title {
            color: var(--text-primary); font-family: var(--font-heading);
            font-size: 1.4rem; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 10px;
        }

        .section-subtitle {
            color: var(--accent-primary); font-size: 0.9rem;
            text-transform: uppercase; letter-spacing: 1px; margin-bottom: 1.5rem;
        }

        .math-container {
            background: rgba(0,0,0,0.3); padding: 1.5rem;
            border-radius: 4px; margin: 1.5rem 0; overflow-x: auto;
            border: 1px solid var(--border-color);
        }

        .judgment-box {
            border: 2px solid var(--accent-secondary);
            background: rgba(255, 23, 68, 0.05);
            padding: 2rem; text-align: center; margin-top: 4rem;
        }

        /* === UTILS === */
        .hidden { display: none !important; }
        .fade-in { opacity: 1 !important; }
        .btn-small {
            background: transparent; border: 1px solid var(--border-color);
            color: var(--text-muted); padding: 0.5rem 1rem; cursor: pointer;
            margin-left: 10px; border-radius: 4px;
        }
        .btn-small:hover { color: var(--text-primary); border-color: var(--text-primary); }

        /* === PRINT STYLES === */
        @media print {
            body { background: white; color: black; }
            .sidebar, .header-controls, #auth-layer { display: none; }
            .layout { display: block; max-width: 100%; margin: 0; }
            .section-card, .judgment-box { 
                border: 1px solid #ccc; background: white; 
                color: black; break-inside: avoid;
            }
            .math-container { background: #f5f5f5; border: 1px solid #ddd; color: black; }
            h1, h2, h3, p { color: black !important; }
            a { text-decoration: none; color: black; }
        }

        @media (max-width: 768px) {
            .layout { grid-template-columns: 1fr; }
            .sidebar { height: auto; position: relative; border-bottom: 1px solid var(--border-color); }
        }
    </style>
</head>
<body>

    <div id="auth-layer">
        <div class="auth-card">
            <h2 style="color: var(--text-primary); margin-bottom: 0.5rem; text-align: center;">INTELLECT DOSE</h2>
            <p style="color: var(--text-muted); text-align: center; margin-bottom: 2rem; font-size: 0.9rem;">v15.1 System Access</p>
            
            <input type="text" id="username" class="auth-input" placeholder="Identity Protocol (Username)">
            <input type="password" id="password" class="auth-input" placeholder="Access Key">
            <button class="auth-btn" onclick="login()">Initialize</button>
            <p id="error-msg" style="color: var(--accent-secondary); text-align: center; margin-top: 1rem; display: none;">Access Denied.</p>
        </div>
    </div>

    <div class="layout hidden" id="app-layout">
        <aside class="sidebar">
            <div class="user-profile">
                <div class="avatar" id="user-avatar">B</div>
                <h3 id="user-name" style="color: var(--text-primary);">User</h3>
                <p id="user-role" style="color: var(--text-muted); font-size: 0.8rem;">Ready</p>
            </div>

            <nav>
                <a href="#" class="nav-link active" onclick="loadDose('2026-01-05')">Today (Jan 5)</a>
                <a href="#" class="nav-link" onclick="loadDose('2026-01-04')">Archive: Jan 4</a>
                <a href="#" class="nav-link" onclick="loadDose('2026-01-03')">Archive: Jan 3</a>
                <div id="musa-menu" style="display: none; margin-top: 2rem; border-top: 1px solid var(--border-color); padding-top: 1rem;">
                    <a href="#" class="nav-link" style="color: var(--accent-gold);">‚ù§Ô∏è Love Lab</a>
                </div>
                <a href="#" class="nav-link" onclick="logout()" style="margin-top: 2rem;">Disconnect</a>
            </nav>
        </aside>

        <main class="main-content">
            <header class="dose-header">
                <div>
                    <h1 id="dose-date" style="color: var(--text-primary); font-family: var(--font-heading);">Date Loading...</h1>
                    <p id="dose-quote" style="color: var(--text-muted); font-style: italic;">Quote Loading...</p>
                </div>
                <div class="header-controls">
                    <button class="btn-small" onclick="window.print()">üñ®Ô∏è Print</button>
                    <button class="btn-small" onclick="togglePersona()">‚ö° Toggle Persona</button>
                </div>
            </header>

            <div id="content-area">
                </div>
        </main>
    </div>

    <script>
        // === CONFIGURATION ===
        const USERS = {
            'boipelo': { pass: 'engineer314', name: 'Director Boipelo', role: 'ENG-3 | TRADER', persona: 'boipelo' },
            'musa': { pass: 'muse271', name: 'Queen Musa', role: 'CHIEF INSIGHT OFFICER', persona: 'musa' }
        };

        let currentUser = null;

        // === CONTENT DATABASE ===
        const DB = {
            '2026-01-05': {
                quote: "\"Monday is the day of execution. Theory ends; practice begins.\"",
                sections: [
                    {
                        icon: "‚ö°", title: "Engineering", subtitle: "MOSFETs: The Miller Plateau",
                        text: "In your induction heater projects, the MOSFET isn't just a switch; it's a dynamic system. As you turn it ON, voltage drops and current rises. However, there is a dangerous zone called the 'Miller Plateau'. This is caused by the parasitic capacitance ($C_{gd}$) between the Gate and Drain. During switching, your gate current is stolen to charge this capacitor, causing the voltage to stall. This is where switching losses explode ($P = V \cdot I$).",
                        math: "$$P_{loss} \\approx f_{sw} \\cdot \\frac{1}{2} V_{ds} I_d (t_{rise} + t_{fall})$$"
                    },
                    {
                        icon: "üìä", title: "Finance", subtitle: "Risk Management: The Sharpe Ratio",
                        text: "You are trading US30. Profit alone is a poor metric. The Sharpe Ratio measures risk-adjusted return. A high return with high volatility (gambling) gives a low score. A moderate return with stability gives a high score. Banks want high Sharpe Ratios, not just lucky streaks.",
                        math: "$$S_a = \\frac{E[R_a - R_b]}{\\sigma_a}$$"
                    },
                    {
                        icon: "ü©∏", title: "Medical Science", subtitle: "RAAS: Blood Pressure Control",
                        text: "The Renin-Angiotensin-Aldosterone System is how your body regulates long-term blood pressure. Low pressure triggers the kidneys to release Renin. This eventually produces Angiotensin II, a potent vasoconstrictor that squeezes veins and tells kidneys to keep salt (and water), raising pressure.",
                        math: ""
                    },
                    {
                        icon: "‚öñÔ∏è", title: "Law", subtitle: "Dolus Eventualis",
                        text: "In SA Law, you are guilty of murder even if you didn't 'mean' to kill a specific person, provided you (1) foresaw the possibility that your action could kill someone and (2) reconciled yourself to that risk and acted anyway (Recklessness).",
                        math: ""
                    },
                    {
                        icon: "üìö", title: "Vocabulary", subtitle: "Word Power",
                        text: "1. **Perspicacious** (Adj): Having a ready insight into things; sharp. <br>2. **Sycophant** (Noun): A person who acts obsequiously to gain advantage. <br>3. **Inchoate** (Adj): Just begun and so not fully formed."
                    }
                ],
                judgment: "The Miller Plateau teaches us that the transition is the most dangerous part. You are transitioning from student to Engineer. Do not get stuck in the plateau. Push through with high current."
            },
            '2026-01-04': {
                quote: "\"Sunday: Rest the body, sharpen the spirit.\"",
                sections: [
                    {
                        icon: "üîå", title: "Engineering", subtitle: "3-Phase: Star vs Delta",
                        text: "Why 3-phase? Constant power delivery. In Star (Y) connection, we have a Neutral point. $V_{line} = \sqrt{3} V_{phase}$. In Delta ($\Delta$), there is no neutral, used for high power transmission.",
                        math: "$$P_{total} = \sqrt{3} \cdot V_L \cdot I_L \cdot \cos(\phi)$$"
                    },
                    {
                        icon: "‚úùÔ∏è", title: "Spirituality", subtitle: "Sanctification",
                        text: "Positional Sanctification is your status (Holy). Progressive Sanctification is your state (Behavior). Do not confuse your standing with God with your current stumbling.",
                        math: ""
                    }
                ],
                judgment: "A motor wired in Star when it needs Delta will run weak. A man living for pleasure when he is built for purpose will fail. Check your wiring."
            },
            '2026-01-03': {
                quote: "\"Saturday Strategy Session.\"",
                sections: [
                    {
                        icon: "üì°", title: "Engineering", subtitle: "Skin Effect",
                        text: "At high frequencies, current crowds to the surface of the conductor, leaving the center empty. This increases effective resistance.",
                        math: "$$\\delta = \\sqrt{\\frac{2\\rho}{\\omega\\mu}}$$"
                    }
                ],
                judgment: "Don't be like a high-frequency wire: superficial with an empty core. Depth requires lower frequency (slowing down)."
            }
        };

        // === AUTH LOGIC ===
        function login() {
            const u = document.getElementById('username').value.trim().toLowerCase();
            const p = document.getElementById('password').value;
            const err = document.getElementById('error-msg');

            if (USERS[u] && USERS[u].pass === p) {
                currentUser = USERS[u];
                // Hide Auth, Show App
                document.getElementById('auth-layer').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('auth-layer').classList.add('hidden');
                    document.getElementById('app-layout').classList.remove('hidden');
                    document.getElementById('app-layout').classList.add('fade-in');
                    initApp();
                }, 600);
            } else {
                err.style.display = 'block';
            }
        }

        function logout() {
            location.reload();
        }

        // === APP LOGIC ===
        function initApp() {
            // Set User Info
            document.getElementById('user-name').innerText = currentUser.name;
            document.getElementById('user-role').innerText = currentUser.role;
            document.getElementById('user-avatar').innerText = currentUser.name.charAt(0);
            
            // Apply Persona Theme
            document.documentElement.setAttribute('data-persona', currentUser.persona);
            
            if(currentUser.persona === 'musa') {
                document.getElementById('musa-menu').style.display = 'block';
            }

            // Load Default Date (Today)
            loadDose('2026-01-05');
        }

        function loadDose(dateKey) {
            const data = DB[dateKey];
            const container = document.getElementById('content-area');
            
            // Update Active Link
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            event.target.classList.add('active');

            if (!data) {
                container.innerHTML = `<div class="section-card"><h3>Data not archived.</h3></div>`;
                return;
            }

            // Update Header
            document.getElementById('dose-date').innerText = new Date(dateKey).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('dose-quote').innerText = data.quote;

            // Generate Content
            let html = '';
            
            data.sections.forEach(sec => {
                html += `
                    <div class="section-card">
                        <div class="section-title">
                            <span>${sec.icon}</span> ${sec.title}
                        </div>
                        <div class="section-subtitle">${sec.subtitle}</div>
                        <p>${sec.text}</p>
                        ${sec.math ? `<div class="math-container">${sec.math}</div>` : ''}
                    </div>
                `;
            });

            html += `
                <div class="judgment-box">
                    <h3 style="color: var(--accent-secondary); margin-bottom: 1rem;">MY JUDGMENT</h3>
                    <p style="font-size: 1.1rem;">${data.judgment}</p>
                </div>
            `;

            container.innerHTML = html;

            // Trigger MathJax Reprocess
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        }

        function togglePersona() {
            const newPersona = document.documentElement.getAttribute('data-persona') === 'boipelo' ? 'musa' : 'boipelo';
            document.documentElement.setAttribute('data-persona', newPersona);
        }

        // Enter key to login
        document.getElementById('password').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') login();
        });
    </script>
</body>
</html>
